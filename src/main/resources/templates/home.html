<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Home</title>
		<link href="/webjars/bootstrap/css/bootstrap.min.css" rel="stylesheet">
		<script src="/webjars/jquery/jquery.min.js"></script>
		<script src="/webjars/sockjs-client/sockjs.min.js"></script>
		<script src="/webjars/stomp-websocket/stomp.min.js"></script>
		<script	src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
		<script	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
		<script type="text/javascript">
			var stompClient;

            function sendTemperature(playerId, deposit) {
                var text = '{"playerId": "'+playerId+'", "deposit": "'+deposit+'", "timestamp": "'+new Date()+'"}';
                stompClient.send("/request/makeDeposit", {priority: 1}, text);
            }

            function getAllDeposits(){
                stompClient.send("/request/getDepositsList", {priority: 1});
            }

            function getDepositsOfPlayer(playerId){
                stompClient.send("/request/getDeposits/"+playerId, {priority: 1});
            }

			$(document).ready(function() {

				var socket = new SockJS('/connection');
				stompClient = Stomp.over(socket);
				stompClient.connect({}, function(frame) {
					stompClient.subscribe('/topic/deposit.event', function(temperature) {
                        $('#total').text(temperature.body);
                        

					});
				});

			});
		</script>
	</head>
	<body>
		<div class="container">
			<div class="jumbotron">
				<h1>Player Deposit Bookeeper App</h1>      
				<p>Bookkepper Notes</p>
			</div>
			     
		</div>
        <nav class="navbar navbar-inverse" style="background-color: #343a40 !important;">
            <div class="container-fluid">
                <div class="navbar-header" style="display: flex; flex-direction: row"> 
                    <h2 style="text-decoration: none; color: rgb(162, 162, 162);">Playtech</h2>
                    <button class="nav-link" style="text-decoration: none; color: rgb(255, 255, 255);">
                        Deposits
                    </button>
                </div>

                <ul class="nav navbar-nav navbar-right">
                    <li style="color:whitesmoke" id="connectionStatus"></li>
                </ul>
            </div>
        </nav>
		<div class="alert" role="alert" style="width:300px;margin-left:40%;margin-top:10px;">
			<p class="text-center">Total : <b id="total">0</b></p>
		</div>
		<!-- <div class="model">
			<div class="modal-dialog" style="width:80%;height:auto">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Player Deposit App</h5>
					</div>
					<div class="model-body">
						<div class="container" style="width:80%">
							<canvas id="lineChart"></canvas>
                            
                        
                        </div>
					</div>
				</div>
			</div>
		</div> -->

	</body>
</html>